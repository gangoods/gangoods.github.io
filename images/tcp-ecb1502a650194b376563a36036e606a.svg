<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1372.802027903364 573.0580645455773" width="1372.802027903364" height="573.0580645455773">
  <!-- svg-source:excalidraw -->
  
  <defs>
    <style class="style-fonts">
      @font-face {
        font-family: "Virgil";
        src: url("https://unpkg.com/@excalidraw/excalidraw@0.15.3/dist/excalidraw-assets/Virgil.woff2");
      }
      @font-face {
        font-family: "Cascadia";
        src: url("https://unpkg.com/@excalidraw/excalidraw@0.15.3/dist/excalidraw-assets/Cascadia.woff2");
      }
    </style>
  </defs>
  <rect x="0" y="0" width="1372.802027903364" height="573.0580645455773" fill="#ffffff"></rect><g stroke-linecap="round" transform="translate(277.1273220593198 20.800979614257812) rotate(0 107 30)"><path d="M-0.56 1.67 C79.53 2.42, 157.22 0.52, 213.09 0 M0.02 0.84 C82.86 0.4, 165.51 1.83, 213.9 0 M212.79 0.42 C214.19 13.1, 212.98 29.7, 215.31 60.93 M214.67 -0.02 C214.51 18.27, 214.48 37, 214.25 60.61 M212.92 60.08 C145.55 59.86, 78.43 60.76, 0.46 58.3 M214.66 60.78 C153.61 59.49, 92.75 59.34, -0.38 60.1 M0.45 61.82 C-1.64 35.29, 0.5 14.26, 1.23 -1.88 M-0.35 59.98 C0.09 41.38, 0.71 23.09, 0.34 -0.99" stroke="#1864ab" stroke-width="1" fill="none"></path></g><g transform="translate(314.1273220593198 39.30097961425781) rotate(0 70 11.5)"><text x="70" y="0" font-family="Helvetica, Segoe UI Emoji" font-size="20px" fill="#1864ab" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">创建一个socket</text></g><g stroke-linecap="round"><g transform="translate(496.6344021374448 53.75025939941406) rotate(0 49.72430419921875 -0.143157958984375)"><path d="M-0.68 0.03 C15.91 -0.07, 84.06 -0.02, 100.6 -0.04 M1.17 -1 C17.61 -1.53, 83.62 -2.42, 100.26 -2.03" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(496.6344021374448 53.75025939941406) rotate(0 49.72430419921875 -0.143157958984375)"><path d="M101.07 -0.47 L87.98 4.18 L88.04 -8.47 L101.23 -3.53" stroke="none" stroke-width="0" fill="#000000" fill-rule="evenodd"></path><path d="M100.29 -0.59 C95.34 -0.8, 90.02 4.09, 86.48 4.27 M99.8 -1.87 C97.18 -1.03, 93.41 1.26, 87.14 4.63 M87.49 4.26 C86.67 -0.24, 86.64 -4.16, 86.99 -7.62 M86.26 4.31 C86.66 -0.15, 87.11 -3.87, 86.84 -9.01 M87.8 -7.06 C90.35 -5.47, 93.28 -3.94, 99.6 -1.86 M86.84 -7.71 C91.31 -6.54, 97.36 -3.26, 100.72 -2.74 M100.26 -2.03 C100.26 -2.03, 100.26 -2.03, 100.26 -2.03 M100.26 -2.03 C100.26 -2.03, 100.26 -2.03, 100.26 -2.03" stroke="#000000" stroke-width="1" fill="none"></path></g></g><mask></mask><g stroke-linecap="round" transform="translate(601.8171413952573 27.857009887695312) rotate(0 83 28)"><path d="M-1.93 -0.36 C59.75 -1.63, 122.92 1.35, 165.84 1.4 M0.11 0.87 C38.45 1, 77.15 1.64, 165.18 -0.75 M164.12 0.02 C164.97 17.08, 165.49 36.32, 165.45 54.89 M165.01 -0.15 C165.05 18.39, 164.72 37.77, 165.06 55.34 M167.21 56.82 C125.56 58.87, 81.92 58.91, -0.07 56.97 M165.22 55.77 C128.79 56.14, 91.62 56.25, 0.25 56.18 M0.42 57.27 C-0.53 40.12, -1.82 23.28, -1.38 1.34 M0.34 55.18 C0.55 41.79, -0.68 26.39, -0.7 0" stroke="#1864ab" stroke-width="1" fill="none"></path></g><g transform="translate(625.3171413952573 32.85700988769531) rotate(0 59.5 23)"><text x="59.5" y="0" font-family="Helvetica, Segoe UI Emoji" font-size="20px" fill="#1864ab" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">返回一个</text><text x="59.5" y="23" font-family="Helvetica, Segoe UI Emoji" font-size="20px" fill="#1864ab" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">fd文件描述符</text></g><g transform="translate(812.8127163464292 10) rotate(0 194 53.5)"><text x="0" y="0" font-family="Helvetica, Segoe UI Emoji" font-size="20px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">操作系统会为每个tcp socket 分配2个缓冲区</text><text x="0" y="26.75" font-family="Helvetica, Segoe UI Emoji" font-size="20px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">缓冲区: 内核中的一块内存</text><text x="0" y="53.5" font-family="Helvetica, Segoe UI Emoji" font-size="20px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">fd操作的就是这2个缓冲区</text><text x="0" y="80.25" font-family="Helvetica, Segoe UI Emoji" font-size="20px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge"></text></g><g stroke-linecap="round" transform="translate(305.6079617362201 311.6987302967018) rotate(0 89.67062377929685 114.32716369628906)"><path d="M-1.89 1.49 C36.57 -0.27, 75.88 -0.37, 179.67 -0.49 M-0.21 0.68 C44.39 -1.27, 88.01 -0.49, 179.26 -0.47 M178.41 -0.65 C177.09 73.6, 179.84 142.48, 178.1 227.94 M179.53 0.05 C180.72 53.24, 179.83 106.33, 179 228.31 M177.57 227.43 C106.57 227.68, 37.65 230.07, 0.2 229.2 M179.66 229.07 C112.38 227.54, 47.98 228.01, 0.42 229.6 M-1.64 230.07 C-0.35 139.59, -1.61 50.9, 1.51 0.03 M-0.59 228.19 C-1.13 160.37, -1.35 90.73, -0.66 0.83" stroke="#d9480f" stroke-width="1" fill="none"></path></g><g stroke-linecap="round" transform="translate(308.4576931815326 361.72930890998305) rotate(0 88 17.5)"><path d="M-1.7 -1.31 C41.96 -2.72, 85.57 -1.8, 174.91 0.46 M0.37 -0.54 C59.93 -0.96, 119.85 -1.66, 176.15 -0.35 M174.15 1.77 C177.19 10.04, 174.35 23.23, 174.64 35.61 M176.92 0.2 C175.94 9.46, 175.68 18.07, 176.99 34.8 M174.71 33.16 C115.96 34.47, 53.59 34.46, 1.37 35.42 M175.15 34.12 C126.36 35.31, 75.43 36.67, 0.9 35.6 M0.98 35.18 C-0.17 22.83, 2.1 9.07, 0.04 1.52 M0.4 35.92 C0.39 24.53, -0.53 14.55, 0.13 -0.77" stroke="#862e9c" stroke-width="1" fill="none"></path></g><g stroke-linecap="round" transform="translate(309.32823761512634 432.5764463611549) rotate(0 87.5 17.5)"><path d="M-1.31 -0.66 C34.57 1.82, 71.48 0.4, 175.46 0.81 M-0.54 -0.04 C49.11 -0.73, 97.27 -0.49, 174.65 0.44 M176.77 1.38 C172.87 7.13, 174.03 15.82, 175.61 34.28 M175.2 -0.13 C175.25 10.86, 174.62 23.5, 174.8 35.48 M173.16 36.27 C138.54 34.07, 101.53 35.25, 0.42 34.74 M174.12 35.86 C116.49 33.94, 59.75 34.42, 0.6 35.71 M0.18 34.49 C0.52 29.64, -0.26 20.78, 1.52 0.12 M0.92 35.15 C0.43 26.16, 1.17 19.02, -0.77 0.48" stroke="#5f3dc4" stroke-width="1" fill="none"></path></g><g transform="translate(355.4576931815326 366.72930890998305) rotate(0 41 12.5)"><text x="41" y="0" font-family="Segoe UI Emoji" font-size="20px" fill="#862e9c" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">读缓冲区</text></g><g transform="translate(355.82823761512634 437.5764463611549) rotate(0 41 12.5)"><text x="41" y="0" font-family="Segoe UI Emoji" font-size="20px" fill="#5f3dc4" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">写缓冲区</text></g><g transform="translate(359.93556793739197 180.46874982795185) rotate(0 31 14)"><text x="0" y="0" font-family="Helvetica, Segoe UI Emoji" font-size="20px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">客户端</text></g><g stroke-linecap="round" transform="translate(823.7272152968546 318.27052097163687) rotate(0 89.67062377929688 114.32716369628906)"><path d="M0.38 -1.63 C41.32 1.13, 83.89 -0.04, 181.12 -1.15 M0.44 0.29 C63.53 1.76, 127.66 1.19, 178.53 -0.42 M178.28 -0.68 C180.57 77.52, 180.47 151.51, 178.29 227.49 M179.34 -0.76 C178.85 87.87, 178.2 174.44, 179.63 229.51 M179.16 228.41 C134.1 229.83, 83.41 230.58, -1.89 228.88 M178.37 227.93 C121.84 230.83, 66.39 230.7, 0.64 228.69 M0.1 229.98 C1.62 153.04, 0.02 77.35, -1.57 -1.64 M0.84 229.18 C-1.32 138.62, -0.45 50.91, -0.18 0.77" stroke="#d9480f" stroke-width="1" fill="none"></path></g><g stroke-linecap="round" transform="translate(826.5769467421671 368.3010995849181) rotate(0 88 17.5)"><path d="M-0.28 0.89 C51.15 1.15, 102.69 0.28, 177.13 -0.65 M-0.41 0.93 C44.38 -0.16, 88.4 -0.94, 176.32 0.95 M175.28 1.82 C174.94 12.42, 174.54 24.45, 177.64 34.13 M176.42 0.68 C175.66 12.06, 176.34 25.46, 175.63 34.74 M177.96 36.21 C122.02 36.74, 69.21 35.01, 0.33 35.3 M175.22 35.64 C108.63 34.23, 40.93 33.75, 0.27 34.2 M0.06 34.06 C-1.83 24.26, -1.86 15.5, 1.8 1.3 M-0.06 34.01 C0.62 25.94, -0.56 16.3, -0.82 -0.83" stroke="#862e9c" stroke-width="1" fill="none"></path></g><g stroke-linecap="round" transform="translate(827.4474911757609 439.14823703609) rotate(0 87.5 17.5)"><path d="M0.89 0.69 C55.55 2.02, 110.51 1.38, 174.35 -0.93 M0.93 -0.22 C60.6 -0.09, 120.08 1.04, 175.95 0.69 M176.82 -0.84 C174.37 7.09, 173.5 18.28, 174.13 35.99 M175.68 -0.34 C174.51 10.84, 175.69 20.63, 174.74 34.98 M176.21 33.47 C126.01 34.82, 73.33 37.04, 0.3 36.71 M175.64 35.49 C140.09 34.27, 104.19 33.9, -0.8 34.51 M-0.94 33.19 C-2.23 22.46, -2.2 15.39, 1.3 -0.4 M-0.99 35.96 C0.53 20.84, 0.69 6.28, -0.83 -0.29" stroke="#5f3dc4" stroke-width="1" fill="none"></path></g><g transform="translate(873.5769467421671 373.3010995849181) rotate(0 41 12.5)"><text x="41" y="0" font-family="Segoe UI Emoji" font-size="20px" fill="#862e9c" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">读缓冲区</text></g><g transform="translate(873.9474911757609 444.14823703609) rotate(0 41 12.5)"><text x="41" y="0" font-family="Segoe UI Emoji" font-size="20px" fill="#5f3dc4" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">写缓冲区</text></g><g transform="translate(885.0661130019328 187.7076700194885) rotate(0 31 14)"><text x="0" y="0" font-family="Helvetica, Segoe UI Emoji" font-size="20px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">服务端</text></g><g mask="url(#mask--xShS-tPljaigQwAkynqz)" stroke-linecap="round"><g transform="translate(497.5160496819736 449.7525389673226) rotate(0 161.38844974686216 -30.6062316136846)"><path d="M-1.46 -0.4 C34.21 -1.89, 73.8 -4.79, 146.78 -16.9 M145.31 -16.34 C208.81 -32.56, 276.59 -49.19, 323.83 -60.09" stroke="#000000" stroke-width="1.5" fill="none" stroke-dasharray="8 9"></path></g><g transform="translate(497.5160496819736 449.7525389673226) rotate(0 161.38844974686216 -30.6062316136846)"><path d="M323.67 -59.46 L313.46 -50.2 L310.49 -65.12 L324.29 -59.1" stroke="none" stroke-width="0" fill="#000000" fill-rule="evenodd"></path><path d="M322.74 -60.39 C319.38 -57.33, 319.03 -54.25, 313.08 -51.62 M311.99 -51.14 C309.63 -55.93, 309.83 -60.37, 309.82 -62.43 M308.21 -64.57 C315.57 -63.37, 320.2 -61.67, 324.66 -59.63 M323.83 -60.09 C323.83 -60.09, 323.83 -60.09, 323.83 -60.09" stroke="#000000" stroke-width="1.5" fill="none"></path></g></g><mask id="mask--xShS-tPljaigQwAkynqz"><rect x="0" y="0" fill="#fff" width="920.2929491756979" height="610.9650021946918"></rect><rect x="601.9366644557281" y="422.44625052263564" fill="#000" width="82" height="23" opacity="1"></rect></mask><g transform="translate(601.9366644557281 422.44625052263564) rotate(0 56.76834382988105 -2.9369178613422946)"><text x="41" y="0" font-family="Helvetica, Segoe UI Emoji" font-size="20px" fill="#2b8a3e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">自动发送</text></g><g transform="translate(1028.2803387709757 444.50409869990835) rotate(0 160.5 34)"><text x="0" y="0" font-family="Helvetica, Segoe UI Emoji" font-size="16px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">服务端回复消息</text><text x="0" y="22.666666666666668" font-family="Helvetica, Segoe UI Emoji" font-size="16px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">将数据从用户态的缓冲区拷贝到内核写缓冲区</text><text x="0" y="45.333333333333336" font-family="Helvetica, Segoe UI Emoji" font-size="16px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">写缓冲区一旦有数据也是自动发送</text></g><g mask="url(#mask-oWe9xGKeTFQi6zisQMNwg)" stroke-linecap="round"><g transform="translate(821.2097240485085 460.27939003307813) rotate(0 -163.73339657736554 -38.97820403698012)"><path d="M-1.16 -0.68 C-26.07 -11.96, -94.05 -55.86, -148.61 -68.62 C-203.17 -81.39, -298.87 -75.78, -328.5 -77.27" stroke="#000000" stroke-width="1.5" fill="none" stroke-dasharray="8 9"></path></g><g transform="translate(821.2097240485085 460.27939003307813) rotate(0 -163.73339657736554 -38.97820403698012)"><path d="M-329.4 -78.62 L-314.2 -85.35 L-315.87 -71.43 L-327.64 -76.88" stroke="none" stroke-width="0" fill="#000000" fill-rule="evenodd"></path><path d="M-329.35 -76.62 C-323.77 -80.77, -317.5 -80.47, -314.4 -83.94 M-313.74 -84.56 C-315.44 -77.93, -315.76 -73.6, -313.75 -71.83 M-315.3 -72.09 C-317.82 -71.41, -321.71 -75.99, -328.29 -76.3 M-328.5 -77.27 C-328.5 -77.27, -328.5 -77.27, -328.5 -77.27" stroke="#000000" stroke-width="1.5" fill="none"></path></g></g><mask id="mask-oWe9xGKeTFQi6zisQMNwg"><rect x="0" y="0" fill="#fff" width="1248.6765172032397" height="638.2357981070384"></rect><rect x="631.0809515651032" y="380.44757803728396" fill="#000" width="82" height="23" opacity="1"></rect></mask><g transform="translate(631.0809515651031 380.4475780372841) rotate(0 25.294441731383017 40.86006309713963)"><text x="41" y="0" font-family="Helvetica, Segoe UI Emoji" font-size="20px" fill="#2b8a3e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">自动发送</text></g><g transform="translate(372.07133301307556 315.8308523364967) rotate(0 21 14)"><text x="0" y="0" font-family="Helvetica, Segoe UI Emoji" font-size="20px" fill="#d9480f" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">内核</text></g><g transform="translate(895.7803387709757 319.00409869990835) rotate(0 21 14)"><text x="0" y="0" font-family="Helvetica, Segoe UI Emoji" font-size="20px" fill="#d9480f" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">内核</text></g><g stroke-linecap="round" transform="translate(305.8509503226459 217.0837743946022) rotate(0 89.08047485351561 46.54048156738281)"><path d="M-1.24 1 C62.81 0.1, 122.15 -0.78, 177.42 -1.94 M0.63 -0.4 C53.07 0.24, 108.27 -0.25, 177.16 0.51 M179.88 0.74 C180.69 31.3, 179.2 59.67, 177.56 94.26 M177.75 -0.55 C179.08 26.63, 177.91 52.87, 178.72 93.18 M177.08 93.36 C128.81 94.12, 78.76 93.07, 0.04 94.15 M179.13 93.59 C112.08 92.53, 47.22 91.67, -0.83 92.54 M1.74 92.86 C0.09 58.13, 0.15 26.41, 1.37 -0.15 M-0.93 92.13 C-0.93 63.69, -0.86 36.15, -0.13 0.74" stroke="#000000" stroke-width="1" fill="none"></path></g><g stroke-linecap="round" transform="translate(306.6322003226459 248.5266760059303) rotate(0 87.5 17.5)"><path d="M0 0 C0 0, 0 0, 0 0 M0 0 C0 0, 0 0, 0 0 M0.26 6.27 C1.19 3.41, 3.99 1.94, 5.67 0.61 M0.07 6.02 C1.23 4.74, 2.69 2.69, 4.9 0.15 M-0.75 12.77 C1.63 8.92, 3.85 5.37, 10.51 1.2 M-0.32 11.28 C2.29 9.37, 5.75 6.22, 9.89 -0.23 M1.51 17.64 C5.92 11.36, 13.45 4.79, 16.92 -1.06 M-0.6 18.03 C4.54 12.27, 10.17 7.15, 15.16 -0.58 M2.05 23.93 C4.06 16.7, 8.47 11.14, 20.36 -0.99 M0.24 23.44 C9.43 15.47, 17.42 5.56, 22.06 -0.01 M0.54 30.46 C5.84 22.19, 12.12 17.26, 24.98 -1.17 M-0.7 29.48 C5.39 24.39, 10.6 18.19, 26.57 1.23 M0.53 36.41 C7.54 25.03, 16.78 18.68, 33.48 1.29 M0.99 36.23 C8.62 26.05, 16.66 16.57, 31.69 -0.64 M6.17 37.05 C15.62 23.63, 23.53 13.59, 37.37 1.63 M6.53 36.47 C15.33 24.95, 24.48 14.25, 36.17 0.86 M11.12 35.76 C22.54 23.49, 29.31 13.53, 41.71 -2.09 M11.66 35.01 C24.06 20.6, 36.37 7.5, 42.07 0.14 M17.95 35.49 C23.83 26.66, 35.89 16.35, 47.34 1.52 M16.75 35.32 C24.07 28.19, 32.21 19.15, 47.74 -0.67 M21.59 35.25 C31.17 25.03, 38.84 16.19, 51.67 -0.31 M21.05 35.35 C32.59 23.42, 44.17 10.4, 53.29 0.02 M26.91 36.89 C31.85 26.15, 38.94 21.43, 58.89 1.95 M26.96 35.49 C35.31 26.59, 43.74 17, 57.67 1.01 M34.24 35.82 C40.93 28.63, 44.84 19.13, 64.73 -1.32 M32.36 36.62 C39.91 28.3, 46.47 19.1, 64.08 0.05 M39.43 36.3 C49.01 26.22, 55.26 12.94, 70.74 -0.4 M37.39 36.54 C46.72 24.52, 55.94 14.25, 69.02 -0.36 M44.16 37.91 C49.79 27.58, 57.48 21.38, 73.01 0.22 M43.48 35.81 C49.78 28.26, 54.87 20.7, 73.78 0.68 M48.63 34.06 C59.09 22.17, 71.47 10.13, 80.42 0.41 M48.87 35.42 C55.75 28.34, 61.51 19.52, 79.43 0.34 M53.85 34.47 C62.53 22.67, 71.55 11.47, 83.39 -1.14 M53.56 36.57 C62.79 27.57, 69.35 17.35, 84.35 -0.29 M58.37 35.71 C69.34 25.95, 79.57 14.72, 88.15 -0.42 M58.87 36.42 C68.05 25.19, 75.81 16.27, 89.2 -0.38 M64.54 35.68 C72.3 27.99, 75.58 19.42, 97.48 -1.58 M64.39 35.87 C71.63 27.83, 79.98 18.79, 96.4 0.34 M71.27 36.08 C76.22 24.08, 84.86 17.64, 100.94 1.55 M69.51 35.24 C80.9 22.51, 93.69 9.56, 101.22 -0.65 M76.25 36.98 C83.35 23.95, 94.05 13.57, 107.65 -0.03 M74.38 36.1 C80.81 27.73, 88.98 20.87, 107.15 -0.89 M80.72 35.24 C90.19 27.43, 94.43 19.1, 112.53 0.01 M79.48 34.94 C88.58 26.58, 96.91 18.62, 111.03 0.78 M83.72 35.07 C94.79 28.99, 98.92 19.23, 116.37 -1.42 M84.56 35 C95.7 25.53, 105.58 14.29, 115.78 0.72 M90.83 34.5 C101.22 22.66, 112.78 8.84, 123.41 1.9 M90.15 35.95 C100.52 23.9, 111.14 12.69, 122.79 0.52 M96.43 35.89 C106.74 23.42, 116.44 11.06, 126.83 0.31 M96.58 35.69 C104.38 27.83, 111.78 18.04, 126.09 0.97 M100.46 36.43 C111.82 24.54, 122.55 12.7, 132.85 -0.58 M101.48 36.08 C113.55 22.61, 122.99 10.21, 133.28 0.58 M106.64 34.63 C119.6 25.04, 127.92 9.03, 138.99 -1.28 M106.74 36.68 C115.46 25.4, 124.31 16.72, 138.5 -0.69 M111.25 36.84 C123.14 23.23, 131.31 11.51, 142.82 -2 M112.06 34.52 C121.01 26.96, 127.86 16.81, 143.91 0.33 M117.35 35.73 C125.77 23.15, 138.94 11.13, 148.21 -0.11 M117.93 35.84 C127.33 23.76, 137.72 12.8, 148.74 -0.21 M123.56 36.8 C131.53 26.57, 139.36 15.74, 154.08 0.33 M123.12 35.83 C131.17 26.01, 138.47 16.98, 154.72 0.52 M126.29 36.88 C139.23 25.3, 150.6 11.3, 160.63 -0.88 M127.7 36.41 C138.24 24.35, 148.49 10.87, 159.15 -0.16 M132.51 34.63 C142.92 26.13, 148.75 18.28, 166.12 -1.64 M134.51 35.94 C145.9 21.85, 157.03 9.53, 164.36 -0.73 M137.97 37.03 C149.87 21.56, 163.68 6.95, 169.1 1 M138.2 35.01 C151.1 22.52, 162.02 8.61, 168.71 0.28 M143.32 34.64 C151.69 23.95, 161.86 15.16, 173.19 1.28 M144.03 36.92 C151.64 24.6, 160.44 14.43, 174.11 0.08 M147.63 36.36 C155.91 25.82, 166.49 16.74, 179.3 1.59 M150.21 35.66 C156.01 27.8, 162.36 21.61, 179.04 1.57 M153.93 36.16 C160.44 29.07, 162.74 24.99, 176.41 8.59 M154.1 35.95 C159.74 29.12, 166.32 20.46, 178.02 8.87 M161.27 36.32 C165.6 28.83, 170.45 25.23, 179.01 15.51 M159.14 35.71 C166.74 28.12, 173.07 21.09, 177.81 14.79 M163.04 33.98 C169.48 32.26, 172.48 26.44, 176.78 21.94 M165.78 35.84 C169.84 31.23, 173.84 26.8, 177.85 21.87 M171.12 35.58 C172.29 32.7, 175.36 29.8, 177.45 26.58 M170.78 35.76 C172.62 32.53, 174.98 30.64, 177.71 27.59" stroke="#82c91e" stroke-width="0.5" fill="none"></path><path d="M1.21 0.99 C60.13 -0.77, 121.61 -2.81, 175.05 0.65 M-0.84 0.64 C56.79 0.84, 111.72 1.22, 175.21 0.98 M176.62 1.4 C175.43 13.66, 174.7 28.81, 174.76 36.05 M175.44 -0.17 C174.12 6.62, 175.41 14.8, 174.84 34.24 M176.22 35.3 C116.98 34.5, 55.51 36.32, 1.32 35.77 M174.12 35.37 C131.05 35.41, 87.33 35.36, 0.69 35.09 M0.17 34.36 C-0.07 24.71, 1.07 10.37, 0.18 0.93 M-0.49 34.38 C-0.1 23.47, 0.19 11.45, 0.52 -0.19" stroke="#5f3dc4" stroke-width="1" fill="none"></path></g><g transform="translate(363.1322003226459 253.5266760059303) rotate(0 31 12.5)"><text x="31" y="0" font-family="Segoe UI Emoji" font-size="20px" fill="#5f3dc4" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">缓冲区</text></g><g transform="translate(348.51354034950134 220.74467451056898) rotate(0 57.5 14)"><text x="0" y="0" font-family="Helvetica, Segoe UI Emoji" font-size="20px" fill="#d9480f" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">应用(用户态)</text></g><g stroke-linecap="round"><g transform="translate(296.32803096402057 270.82196399975567) rotate(0 -20.76667826890533 92.57764387265894)"><path d="M0.74 0.24 C-7.02 10.84, -40.09 38.51, -46.54 63.11 C-53 87.71, -46.57 127.31, -37.97 147.83 C-29.37 168.35, -2.16 179.84, 5.05 186.23 M-0.33 -0.68 C-7.7 9.61, -38.33 36.44, -44.21 61.34 C-50.08 86.24, -43.9 128.23, -35.58 148.71 C-27.26 169.2, -0.96 178.45, 5.7 184.24" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(296.32803096402057 270.82196399975567) rotate(0 -20.76667826890533 92.57764387265894)"><path d="M6.6 185.45 L-9.4 183.45 L-3.13 173.64 L7.52 184.16" stroke="none" stroke-width="0" fill="#000000" fill-rule="evenodd"></path><path d="M6 183.35 C2.07 182.61, -4.27 184.22, -7.86 183.76 M5.34 184.98 C-0.25 184.1, -5.95 182.14, -8.6 182.18 M-9.56 183.29 C-5.63 178.95, -5.05 173.43, -2.42 171.84 M-9.73 181.85 C-7.98 180.36, -5.59 177.38, -2.11 171.77 M-1.46 172.43 C-0.08 176.32, 4.53 180.12, 4.83 184.74 M-2.31 171.26 C0.07 176.56, 3.37 180.77, 5.87 184.69 M5.7 184.24 C5.7 184.24, 5.7 184.24, 5.7 184.24 M5.7 184.24 C5.7 184.24, 5.7 184.24, 5.7 184.24" stroke="#000000" stroke-width="1" fill="none"></path></g></g><mask></mask><g transform="translate(492.8536117450733 473.0580645455773) rotate(0 122 45)"><text x="0" y="0" font-family="Helvetica, Segoe UI Emoji" font-size="16px" fill="#343a40" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">写缓冲区一旦有数据,</text><text x="0" y="22.5" font-family="Helvetica, Segoe UI Emoji" font-size="16px" fill="#343a40" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">就会自动发送到服务端的读缓冲区</text><text x="0" y="45" font-family="Helvetica, Segoe UI Emoji" font-size="16px" fill="#343a40" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">即使客户端的sokcet关闭,也会发送</text><text x="0" y="67.5" font-family="Helvetica, Segoe UI Emoji" font-size="16px" fill="#343a40" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">这个已经和socket无关了.</text></g><g stroke-linecap="round" transform="translate(824.8960525615672 222.83747393389126) rotate(0 89.08047485351562 46.54048156738281)"><path d="M-1.05 -1.25 C47.34 -1.94, 91.73 -1.88, 178.45 0.44 M-0.22 -0.57 C52.75 -2.23, 106.97 -1.18, 177.99 -0.42 M178.09 1.42 C176.5 34.42, 177.11 67.12, 177.25 94.58 M178.71 0.71 C177.66 30.47, 177.75 61.74, 178.39 92.57 M178.43 93.23 C134.48 91.93, 89.6 95.14, 0.59 92.61 M178.32 92.92 C131.84 93.13, 87.01 93.25, -0.93 93.41 M1.92 94.63 C-2.6 62.2, -0.93 28.54, 1.53 1.09 M-0.88 93.43 C0.54 58.26, 0.53 24.51, 0.6 0.53" stroke="#000000" stroke-width="1" fill="none"></path></g><g stroke-linecap="round" transform="translate(825.6773025615672 254.28037554521939) rotate(0 87.5 17.5)"><path d="M0 0 C0 0, 0 0, 0 0 M0 0 C0 0, 0 0, 0 0 M-0.08 5.73 C1.42 4.55, 2.78 3.25, 5.47 0.79 M-0.22 6.1 C1.1 4.6, 2.35 3.2, 4.98 0.16 M-1.22 11.09 C4.3 8.32, 9.55 3.92, 9.46 0.98 M0.3 12.52 C2.85 8.83, 4.47 7.15, 11.14 -0.59 M0.42 18.52 C2.82 12.56, 7.47 9.2, 17.54 1.78 M0.74 19.03 C3.87 12.75, 10.13 7.03, 16.54 0.77 M0.21 25.05 C5.85 15.61, 12.33 10.94, 19.85 -0.8 M0.17 24.42 C6.04 17.63, 10.55 12.13, 21.58 -0.36 M1.55 29.68 C10.09 18.24, 17.36 7.58, 26.8 -0.98 M0.87 30.03 C11.6 18.54, 20.87 6.96, 26.01 1.12 M0.34 34.32 C9.03 27.43, 15.27 21.76, 33.07 1.69 M1.79 36.28 C12.29 23.42, 22.53 10.19, 31.28 0.58 M6.43 34.03 C14.95 28.19, 20.7 16.28, 36.54 0.12 M5.77 35.96 C17.58 24.46, 26.16 11.4, 37.19 -0.18 M13.6 36.09 C22.77 25.14, 30.3 12.36, 44.03 1.09 M10.7 36.08 C22.99 22.71, 34.02 9.81, 42.87 -0.7 M15.92 34.44 C29.41 22.05, 40.59 7.83, 46.58 -1.17 M17.13 35.04 C23.51 28.35, 29.56 21.08, 47.27 0.41 M20.29 37.18 C32.43 24.81, 39.37 13.03, 53.17 0.5 M22.07 36.91 C32.55 23.29, 45.93 8.34, 52.21 -0.33 M28.89 36.33 C40.49 21.81, 51.09 8.85, 57.98 -0.34 M26.73 35.91 C39.7 22.65, 49.95 8.95, 58.82 1.04 M33.8 37.58 C42.38 24.61, 50.24 16.33, 62.16 -2.2 M32.3 36.93 C38.89 27.94, 44.78 22.09, 64.57 0.13 M38.02 34.56 C48.88 21.4, 58.79 12.73, 69.06 1.84 M38.31 36.53 C43.87 27.5, 50.91 21.04, 69.77 0.5 M42.78 34.3 C51.44 26.67, 55.8 20.29, 73.97 1.61 M43.14 35.17 C51.28 26.63, 60.03 15.7, 74.56 -0.19 M49.25 34.75 C61.91 20.52, 71.03 8.87, 79.39 -0.62 M49 35.5 C56.08 27.18, 63.13 19.83, 79.42 0.19 M53.81 34.31 C60.98 24.07, 71.61 17.14, 84.77 -0.69 M54.42 36.55 C63.62 24.58, 72.29 16.08, 84.17 0.4 M57.78 37.28 C65.74 27.12, 73.83 20.23, 89.77 1.01 M59.29 36.04 C68.02 23.32, 78.34 12.19, 90.47 0.14 M62.69 35.38 C76.41 23.58, 85 14.32, 96.01 1 M63.33 36.59 C71.67 28.68, 78.32 20.3, 94.79 0.26 M68.04 37.27 C78.23 23.18, 89.55 12.73, 102.29 -1.76 M69.07 36 C80.15 25, 88.79 13.35, 100.97 1.03 M74.51 34 C84.46 21.32, 96.99 11.63, 106.38 -0.42 M74.41 35.46 C83.06 26.01, 92.98 14.1, 107.16 0.36 M81.73 36.58 C88.43 26.37, 95.27 15.47, 112.25 1.31 M79.57 35.84 C89.89 25.66, 97.83 15.56, 110.36 0.12 M83.56 37.41 C95.46 22.87, 105.96 12.84, 115.17 -0.6 M85.61 35.94 C97.59 22.57, 110.46 8.69, 116.75 1.05 M89.79 35.84 C99.72 26.21, 110.98 14.35, 120.23 -0.78 M91.42 34.67 C100.8 24.96, 110.82 13.1, 121.45 -0.67 M97.42 35.62 C107.15 22.41, 118.72 8.58, 128.88 1.33 M96.24 35.43 C104.27 25.46, 112.64 16.35, 126.36 1.05 M100.41 34.42 C107.65 26.35, 114.59 21.79, 132.03 -0.29 M102.62 36.21 C114.47 20.47, 124.95 7.03, 132.43 -0.81 M104.91 37.36 C112.07 27.8, 120.05 21.36, 137.29 -0.75 M106.98 35.96 C118.28 22.15, 129.39 8.95, 138.22 -0.06 M111.03 34.44 C119.24 26.32, 128.04 15.04, 142.73 1.28 M112.54 34.79 C124.58 21.09, 137.24 8.59, 142.86 0.86 M116.09 34.13 C125.3 25.31, 138.05 12.67, 148.1 1.03 M117.89 36.21 C128.51 23.74, 137.76 11.96, 148.57 1.2 M124.34 36.77 C131.12 25.6, 140.63 15.7, 152.63 1.17 M123.93 35.39 C128.21 28.69, 136.05 21.82, 153.67 0.12 M126.27 36.18 C138.5 23.61, 149.05 10, 158.25 1.29 M128.41 35.45 C138.34 24.58, 147.52 11.65, 159.04 0.94 M132.29 37.04 C143.78 25.15, 149.75 13.96, 163.32 -0.61 M132.92 35.61 C139.69 27.63, 147.25 20.8, 165.17 -0.62 M140.03 36.5 C147.52 23.61, 159.87 13.04, 169.92 1.4 M139.36 35.58 C149.17 24.48, 158.24 12.66, 168.62 -0.14 M143.41 34.36 C154.51 24.49, 162.04 13.47, 173.59 -1.33 M144.33 36.43 C150.48 27.75, 157.39 20.01, 175.05 -0.33 M151.18 34.84 C154.84 30.03, 161.68 20.04, 176.6 3.75 M148.9 35.15 C156.62 28.34, 162.99 20.12, 177.72 1.58 M153.45 36.36 C158.38 30.16, 163.35 25.07, 179.66 9.58 M154.37 35.16 C162.95 26.88, 172.73 16.46, 178.5 9.71 M158.79 33.71 C167.98 25.99, 174.09 19.09, 176.41 14.75 M160.62 35.3 C167.38 28.13, 173.58 20.85, 177.53 13.61 M165.45 35.65 C166.69 32.47, 169.86 27.12, 176.07 22.31 M164.62 36.06 C167.62 32.02, 171.24 29.94, 177.2 21.75 M170.86 34.89 C171.39 32.84, 173.53 30.74, 178.51 27.1 M171 35.71 C172.45 33.23, 175.17 31.28, 177.34 27.4" stroke="#82c91e" stroke-width="0.5" fill="none"></path><path d="M-1.25 0.57 C44.11 -0.88, 88.54 1.2, 175.44 -0.05 M-0.57 -0.27 C45.5 1.32, 92.95 0.22, 174.58 0.68 M176.42 -1.86 C175.23 10, 173.63 21.58, 176.5 35.66 M175.71 0.19 C174.43 8.17, 174.71 16, 174.48 34.44 M175.15 34.73 C118.42 33.49, 66.45 35.82, -0.47 34.1 M174.84 34.14 C134.84 35.03, 95.09 34.34, 0.33 35.45 M1.55 33.05 C1.16 21.79, -0.37 10.68, 1.09 1.3 M0.35 35.07 C-0.6 26.31, -0.39 18.1, 0.53 -0.28" stroke="#5f3dc4" stroke-width="1" fill="none"></path></g><g transform="translate(882.1773025615672 259.2803755452194) rotate(0 31 12.5)"><text x="31" y="0" font-family="Segoe UI Emoji" font-size="20px" fill="#5f3dc4" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">缓冲区</text></g><g transform="translate(867.5586425884227 226.49837404985806) rotate(0 57.5 14)"><text x="0" y="0" font-family="Helvetica, Segoe UI Emoji" font-size="20px" fill="#d9480f" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">应用(用户态)</text></g><g stroke-linecap="round"><g transform="translate(1006.4339266853784 387.54331862695915) rotate(0 16.46777253282096 -59.80141726070673)"><path d="M0.64 -0.94 C5.48 -4.79, 24.26 -7.37, 29.45 -21.95 C34.65 -36.53, 36.6 -72.11, 31.81 -88.42 C27.02 -104.73, 5.59 -114.62, 0.72 -119.81 M-0.49 1.18 C4.22 -1.98, 23.02 -5.7, 28.79 -20.51 C34.55 -35.31, 38.83 -71.27, 34.11 -87.65 C29.39 -104.04, 5.88 -113.57, 0.45 -118.81" stroke="#343a40" stroke-width="1" fill="none"></path></g><g transform="translate(1006.4339266853784 387.54331862695915) rotate(0 16.46777253282096 -59.80141726070673)"><path d="M-0.47 -120.12 L16.33 -114.7 L9.28 -104.59 L0.26 -118.32" stroke="none" stroke-width="0" fill="#343a40" fill-rule="evenodd"></path><path d="M-0.72 -118.14 C5.15 -119.51, 8.97 -118.54, 15 -115.33 M0.97 -118.63 C4.65 -118.39, 9.04 -116.88, 15.49 -117.07 M14.51 -116.16 C13.4 -111.71, 9.62 -108.18, 7.12 -106.75 M15.12 -116.37 C12.29 -112.57, 10.92 -109.15, 8.34 -106.16 M9.48 -105.6 C5.13 -107.4, 4.91 -111.98, 0.52 -118.13 M7.88 -105.61 C6.45 -108.95, 4.43 -111.64, 1.06 -118.3 M0.45 -118.81 C0.45 -118.81, 0.45 -118.81, 0.45 -118.81 M0.45 -118.81 C0.45 -118.81, 0.45 -118.81, 0.45 -118.81" stroke="#343a40" stroke-width="1" fill="none"></path></g></g><mask></mask><g transform="translate(1056.802027903364 294.06005388994595) rotate(0 153 34)"><text x="0" y="0" font-family="Helvetica, Segoe UI Emoji" font-size="16px" fill="#343a40" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">recv服务端读数据,</text><text x="0" y="22.666666666666668" font-family="Helvetica, Segoe UI Emoji" font-size="16px" fill="#343a40" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">是对fd进行read操作,</text><text x="0" y="45.333333333333336" font-family="Helvetica, Segoe UI Emoji" font-size="16px" fill="#343a40" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">是将读缓冲区的数据拷贝到用户态的缓冲区</text></g><g transform="translate(29.448643483354545 326.7415362252648) rotate(0 118.5 34)"><text x="0" y="0" font-family="Helvetica, Segoe UI Emoji" font-size="16px" fill="#343a40" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">send发送数据(对fd进行write操作)</text><text x="0" y="22.666666666666668" font-family="Helvetica, Segoe UI Emoji" font-size="16px" fill="#343a40" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">是将用户态的数据</text><text x="0" y="45.333333333333336" font-family="Helvetica, Segoe UI Emoji" font-size="16px" fill="#343a40" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">拷贝到内核态的写缓冲区</text></g><g stroke-linecap="round" transform="translate(345.61807707710454 169.4010516061242) rotate(0 44.829833984375 23.129226684570312)"><path d="M-0.18 0.87 C23.85 -1.37, 49.69 0.67, 88.66 0.5 M0.68 -0.93 C35.77 1.13, 71.94 1.21, 88.75 -0.46 M89.28 -1.98 C89.01 17.95, 91.54 34.04, 87.74 46.94 M88.7 -0.98 C89.16 10.14, 90.63 20.17, 90.5 46.19 M89.57 46.1 C68.97 44.64, 49.91 44.82, 0.83 46.38 M88.76 46.97 C58.28 46.53, 27.41 46.19, 0.21 46.35 M0.73 46.62 C1.49 31.6, -0.45 16.13, 1.07 1.77 M0.57 46 C-1.25 28.48, 0.11 11.13, -0.85 -0.03" stroke="#343a40" stroke-width="1" fill="none"></path></g><g stroke-linecap="round" transform="translate(867.1224014385203 179.36800677080538) rotate(0 45.34112548828125 21.748123168945312)"><path d="M-0.72 -1.13 C29.16 1.01, 61.24 1.14, 90.38 0.88 M0.96 0.35 C29.45 0.11, 59.14 -0.28, 90.68 -0.82 M92.13 -1.77 C92.21 14.85, 89.23 29.8, 91.58 42.48 M90.57 0.45 C90.68 9.57, 90.86 17.85, 91.29 43.89 M89.38 44.34 C72.93 43.78, 53.38 43.05, 0.58 43.06 M90.23 42.54 C72.89 44, 53.12 44.33, -0.22 42.63 M0.13 44.42 C1.25 30.58, -0.06 18.5, -0.19 -1.88 M0.19 44.38 C0.45 26.55, 0.01 9.08, 0.68 0.62" stroke="#343a40" stroke-width="1" fill="none"></path></g><g transform="translate(10 420.3646229736114) rotate(0 122 34)"><text x="0" y="0" font-family="Helvetica, Segoe UI Emoji" font-size="16px" fill="#c92a2a" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">send操作仅仅是做了个拷贝的事情</text><text x="0" y="22.666666666666668" font-family="Helvetica, Segoe UI Emoji" font-size="16px" fill="#c92a2a" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">真正发送到对端的操作是TCP协议</text><text x="0" y="45.333333333333336" font-family="Helvetica, Segoe UI Emoji" font-size="16px" fill="#c92a2a" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">自动做的事情.</text></g></svg>